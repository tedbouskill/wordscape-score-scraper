CREATE TABLE players (
    player_id INTEGER PRIMARY KEY AUTOINCREMENT, -- Unique ID for each player
    player_tag TEXT NOT NULL UNIQUE,            -- Player tag (unique identifier for the player)
    is_active INTEGER NOT NULL DEFAULT 1 CHECK (is_active IN (0, 1)), -- 1 for active, 0 for inactive
    join_date TEXT NOT NULL DEFAULT CURRENT_DATE, -- Date the player joined the team
    leave_date TEXT                              -- Optional date the player left the team
);

CREATE TABLE scores (
    score_id INTEGER PRIMARY KEY AUTOINCREMENT, -- Unique ID for each score entry
    player_id INTEGER NOT NULL,                -- Foreign key linking to players.player_id
    score INTEGER NOT NULL,                    -- Player's score for the weekend
    weekend_date TEXT NOT NULL,                -- Date of the weekend (e.g., the Sunday or Monday of the tournament)
    rank INTEGER,                              -- Player's rank for that weekend
    is_top_scorer INTEGER NOT NULL DEFAULT 0 CHECK (is_top_scorer IN (0, 1)), -- 1 if top scorer for the weekend
    FOREIGN KEY (player_id) REFERENCES players (player_id)
);

CREATE INDEX idx_player_tag ON players (player_tag);
CREATE INDEX idx_weekend_date ON scores (weekend_date);